<div class="card p-4">
    <h2 class="mb-4">Shopping Cart</h2>

    <div *ngIf="cart()?.items?.length; else emptyCart">
        <div class="grid header font-bold mb-2 border-bottom-1 surface-border pb-2 hidden md:flex">
            <div class="col-6">Product</div>
            <div class="col-2">Price</div>
            <div class="col-2">Quantity</div>
            <div class="col-2">Total</div>
        </div>

        <div class="grid align-items-center mb-3 border-bottom-1 surface-border pb-3" *ngFor="let item of cart()!.items">
            <div class="col-12 md:col-6 flex align-items-center gap-3">
                <img [src]="item.product.image"
                    [alt]="item.product.name" class="w-4rem shadow-2 border-round" />
                <div class="flex flex-column">
                    <span class="font-bold">{{ item.product.name }}</span>
                    <span class="text-sm text-600">{{ item.product.category }}</span>
                </div>
            </div>
            <div class="col-12 md:col-2">
                <span class="md:hidden font-bold mr-2">Price:</span>
                {{ '$' + item.product.price }}
            </div>
            <div class="col-12 md:col-2 flex align-items-center gap-2">
                <button pButton icon="pi pi-minus" class="p-button-text p-button-rounded p-button-sm"
                    (click)="updateQuantity(item, item.quantity - 1)" [disabled]="item.quantity <= 1"></button>
                <span class="font-bold w-2rem text-center">{{ item.quantity }}</span>
                <button pButton icon="pi pi-plus" class="p-button-text p-button-rounded p-button-sm"
                    (click)="updateQuantity(item, item.quantity + 1)"></button>
            </div>
            <div class="col-12 md:col-2 flex justify-content-between align-items-center">
                <span class="font-bold">{{ '$' + (item.product.price * item.quantity) }}</span>
                <button pButton icon="pi pi-trash" class="p-button-danger p-button-text p-button-rounded"
                    (click)="removeItem(item)"></button>
            </div>
        </div>

        <div class="flex justify-content-end mt-4">
            <div class="text-xl font-bold">
                Total: {{ '$' + totalPrice() }}
            </div>
        </div>

        <div class="flex justify-content-end mt-4 gap-3">
            <button pButton label="Clear Cart" class="p-button-outlined p-button-danger" (click)="clearCart()"></button>
            <button pButton label="Checkout" class="p-button-success"></button>
        </div>
    </div>

    <ng-template #emptyCart>
        <div class="text-center p-5">
            <i class="pi pi-shopping-cart text-6xl text-500 mb-3"></i>
            <div class="text-xl font-semibold text-900">Your cart is empty</div>
            <button pButton label="Go Shopping" routerLink="/products" class="mt-3"></button>
        </div>
    </ng-template>
</div>